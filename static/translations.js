// Centralized translations for the entire website
const translations = {
  nl: {
    // Navigation
    home: 'Home',
    directory: 'Gids',
    pairings: 'Pairings',
    history: 'Geschiedenis',
    about: 'Over Ons',
    
    // Homepage
    siteTitle: 'Belgische Chocolade Gids',
    heroTitle: 'Ontdek de Beste Belgische Chocolatiers',
    heroSubtitle: 'Van traditionele pralines tot moderne creaties',
    exploreButton: 'Ontdek Chocolatiers',
    
    // Features
    featuresTitle: 'Waarom Belgische Chocolade Gids?',
    feature1Title: 'Landelijke Dekking',
    feature1Text: 'Ontdek chocolatiers door heel België',
    feature2Title: 'Kwaliteitscontrole',
    feature2Text: 'Alleen de beste ambachtslieden',
    feature3Title: 'Bean-to-Bar',
    feature3Text: 'Van boon tot reep',
    
    // Stats
    visitors: 'Duizenden chocoladeliefhebbers bezoeken onze gids',
    featured: 'Prominente plaatsing in onze directory',
    connection: 'Verbind met lokale en internationale klanten',
    
    // About section
    aboutText: 'Belgische Chocolade Gids verbindt chocoladeliefhebbers met de beste ambachtelijke chocolatiers van België.',
    
    // Directory page
    directoryTitle: 'Chocolatier Directory',
    filterByType: 'Filter op Type',
    filterByProvince: 'Filter op Provincie',
    filterByCity: 'Filter op Stad',
    searchPlaceholder: 'Zoek op naam...',
    searchButton: 'Zoeken',
    resetButton: 'Reset',
    allTypes: 'Alle Types',
    allProvinces: 'Alle Provincies',
    allCities: 'Alle Steden',
    
    // Business types
    winkel: 'Winkel',
    atelier: 'Atelier',
    museum: 'Museum',
    fabriek: 'Fabriek',
    cafe: 'Café',
    
    // Business details
    callUs: 'Bel ons',
    emailUs: 'Email ons',
    visitWebsite: 'Bezoek website',
    details: 'Details',
    
    // Results
    business: 'bedrijf',
    businesses: 'bedrijven',
    found: 'gevonden',
    noResults: 'Geen bedrijven gevonden. Pas uw filters aan.',
    errorLoading: 'Fout bij laden van bedrijven. Probeer het later opnieuw.',
    
    // Pairings page
    pairingsTitle: 'Chocolade Pairings',
    pairingsIntro: 'Ontdek de perfecte combinaties met Belgische chocolade',
    
    // History page
    historyTitle: 'Geschiedenis van Belgische Chocolade',
    historyIntro: 'Van de uitvinding van de praline tot hedendaagse innovaties',
    
    // About page
    aboutTitle: 'Over Belgische Chocolade Gids',
    aboutIntro: 'Onze missie is om de rijke traditie van Belgische chocolade te delen met de wereld',
    
    // Footer
    footerText: '© 2024 Belgische Chocolade Gids. Alle rechten voorbehouden',
    privacyPolicy: 'Privacy Beleid',
    termsOfService: 'Gebruiksvoorwaarden',
    contact: 'Contact'
  },
  
  fr: {
    // Navigation
    home: 'Accueil',
    directory: 'Annuaire',
    pairings: 'Accords',
    history: 'Histoire',
    about: 'À Propos',
    
    // Homepage
    siteTitle: 'Guide du Chocolat Belge',
    heroTitle: 'Découvrez les Meilleurs Chocolatiers Belges',
    heroSubtitle: 'Des pralines traditionnelles aux créations modernes',
    exploreButton: 'Explorer les Chocolatiers',
    
    // Features
    featuresTitle: 'Pourquoi le Guide du Chocolat Belge?',
    feature1Title: 'Couverture Nationale',
    feature1Text: 'Découvrez des chocolatiers dans toute la Belgique',
    feature2Title: 'Contrôle Qualité',
    feature2Text: 'Seulement les meilleurs artisans',
    feature3Title: 'Bean-to-Bar',
    feature3Text: 'De la fève à la tablette',
    
    // Stats
    visitors: 'Des milliers d\'amateurs de chocolat visitent notre guide',
    featured: 'Placement en vedette dans notre annuaire',
    connection: 'Connectez-vous avec des clients locaux et internationaux',
    
    // About section
    aboutText: 'Le Guide du Chocolat Belge connecte les amateurs de chocolat avec les meilleurs chocolatiers artisanaux de Belgique.',
    
    // Directory page
    directoryTitle: 'Annuaire des Chocolatiers',
    filterByType: 'Filtrer par Type',
    filterByProvince: 'Filtrer par Province',
    filterByCity: 'Filtrer par Ville',
    searchPlaceholder: 'Rechercher par nom...',
    searchButton: 'Rechercher',
    resetButton: 'Réinitialiser',
    allTypes: 'Tous les Types',
    allProvinces: 'Toutes les Provinces',
    allCities: 'Toutes les Villes',
    
    // Business types
    winkel: 'Magasin',
    atelier: 'Atelier',
    museum: 'Musée',
    fabriek: 'Usine',
    cafe: 'Café',
    
    // Business details
    callUs: 'Appelez-nous',
    emailUs: 'Envoyez-nous un email',
    visitWebsite: 'Visitez le site web',
    details: 'Détails',
    
    // Results
    business: 'entreprise',
    businesses: 'entreprises',
    found: 'trouvées',
    noResults: 'Aucune entreprise trouvée. Ajustez vos filtres.',
    errorLoading: 'Erreur lors du chargement des entreprises. Veuillez réessayer plus tard.',
    
    // Pairings page
    pairingsTitle: 'Accords Chocolat',
    pairingsIntro: 'Découvrez les combinaisons parfaites avec le chocolat belge',
    
    // History page
    historyTitle: 'Histoire du Chocolat Belge',
    historyIntro: 'De l\'invention de la praline aux innovations contemporaines',
    
    // About page
    aboutTitle: 'À Propos du Guide du Chocolat Belge',
    aboutIntro: 'Notre mission est de partager la riche tradition du chocolat belge avec le monde',
    
    // Footer
    footerText: '© 2024 Guide du Chocolat Belge. Tous droits réservés',
    privacyPolicy: 'Politique de Confidentialité',
    termsOfService: 'Conditions d\'Utilisation',
    contact: 'Contact'
  },
  
  en: {
    // Navigation
    home: 'Home',
    directory: 'Directory',
    pairings: 'Pairings',
    history: 'History',
    about: 'About',
    
    // Homepage
    siteTitle: 'Belgian Chocolate Guide',
    heroTitle: 'Discover the Best Belgian Chocolatiers',
    heroSubtitle: 'From traditional pralines to modern creations',
    exploreButton: 'Explore Chocolatiers',
    
    // Features
    featuresTitle: 'Why Belgian Chocolate Guide?',
    feature1Title: 'Nationwide Coverage',
    feature1Text: 'Discover chocolatiers across Belgium',
    feature2Title: 'Quality Control',
    feature2Text: 'Only the finest craftsmen',
    feature3Title: 'Bean-to-Bar',
    feature3Text: 'From bean to bar',
    
    // Stats
    visitors: 'Thousands of chocolate lovers visit our guide',
    featured: 'Featured placement in our directory',
    connection: 'Connect with local and international customers',
    
    // About section
    aboutText: 'Belgian Chocolate Guide connects chocolate lovers with the finest artisan chocolatiers in Belgium.',
    
    // Directory page
    directoryTitle: 'Chocolatier Directory',
    filterByType: 'Filter by Type',
    filterByProvince: 'Filter by Province',
    filterByCity: 'Filter by City',
    searchPlaceholder: 'Search by name...',
    searchButton: 'Search',
    resetButton: 'Reset',
    allTypes: 'All Types',
    allProvinces: 'All Provinces',
    allCities: 'All Cities',
    
    // Business types
    winkel: 'Shop',
    atelier: 'Workshop',
    museum: 'Museum',
    fabriek: 'Factory',
    cafe: 'Café',
    
    // Business details
    callUs: 'Call us',
    emailUs: 'Email us',
    visitWebsite: 'Visit website',
    details: 'Details',
    
    // Results
    business: 'business',
    businesses: 'businesses',
    found: 'found',
    noResults: 'No businesses found. Adjust your filters.',
    errorLoading: 'Error loading businesses. Please try again later.',
    
    // Pairings page
    pairingsTitle: 'Chocolate Pairings',
    pairingsIntro: 'Discover the perfect combinations with Belgian chocolate',
    
    // History page
    historyTitle: 'History of Belgian Chocolate',
    historyIntro: 'From the invention of the praline to contemporary innovations',
    
    // About page
    aboutTitle: 'About Belgian Chocolate Guide',
    aboutIntro: 'Our mission is to share the rich tradition of Belgian chocolate with the world',
    
    // Footer
    footerText: '© 2024 Belgian Chocolate Guide. All rights reserved',
    privacyPolicy: 'Privacy Policy',
    termsOfService: 'Terms of Service',
    contact: 'Contact'
  }
};

// Global translation function
let currentLang = 'nl';

function t(key) {
  return translations[currentLang]?.[key] || translations.nl[key] || key;
}

function initLanguage() {
  // Get language from URL, localStorage, or default to nl
  const urlParams = new URLSearchParams(window.location.search);
  const urlLang = urlParams.get('lang');
  const storedLang = localStorage.getItem('language');
  
  if (urlLang && ['nl', 'fr', 'en'].includes(urlLang)) {
    currentLang = urlLang;
    localStorage.setItem('language', urlLang);
  } else if (storedLang && ['nl', 'fr', 'en'].includes(storedLang)) {
    currentLang = storedLang;
  }
  
  // Update HTML lang attribute
  document.documentElement.lang = currentLang;
  
  // Update language selector dropdowns
  const selectors = document.querySelectorAll('#languageSelector, #mobileLanguageSelector');
  selectors.forEach(selector => {
    if (selector) selector.value = currentLang;
  });
  
  // Update all navigation links to include current language
  updateNavigationLinks();
  
  // Translate page content
  translatePage();
}

function updateNavigationLinks() {
  const links = document.querySelectorAll('a[href^="/"], a[href^="?"]');
  links.forEach(link => {
    const href = link.getAttribute('href');
    if (href && !href.includes('lang=')) {
      const separator = href.includes('?') ? '&' : '?';
      link.setAttribute('href', `${href}${separator}lang=${currentLang}`);
    }
  });
}

function translatePage() {
  // Translate elements with data-i18n attribute
  const elements = document.querySelectorAll('[data-i18n]');
  elements.forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (key) {
      el.textContent = t(key);
    }
  });
  
  // Translate placeholders
  const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
  placeholders.forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (key) {
      el.placeholder = t(key);
    }
  });
  
  // Update page title if it has data-i18n-title
  const titleKey = document.body.getAttribute('data-i18n-title');
  if (titleKey) {
    document.title = `${t(titleKey)} - ${t('siteTitle')}`;
  }
}

// Setup language switchers
function setupLanguageSwitchers() {
  const selectors = document.querySelectorAll('#languageSelector, #mobileLanguageSelector');
  selectors.forEach(selector => {
    selector?.addEventListener('change', (e) => {
      const newLang = e.target.value;
      localStorage.setItem('language', newLang);
      
      // Update URL with new language
      const urlParams = new URLSearchParams(window.location.search);
      urlParams.set('lang', newLang);
      window.location.search = urlParams.toString();
    });
  });
}

// Initialize on page load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    initLanguage();
    setupLanguageSwitchers();
  });
} else {
  initLanguage();
  setupLanguageSwitchers();
}
